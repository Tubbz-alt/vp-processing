<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Process vertical profile data for visualizations</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Process vertical profile data for visualizations">
  <meta name="generator" content="bookdown 0.3 and GitBook 2.6.7">

  <meta property="og:title" content="Process vertical profile data for visualizations" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="enram/timamp-etl" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Process vertical profile data for visualizations" />
  
  
  

<meta name="author" content="Peter Desmet">


<meta name="date" content="2017-05-19">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="index.html">
<link rel="next" href="extract-vp.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="download-vp.html"><a href="download-vp.html"><i class="fa fa-check"></i><b>1</b> Download vertical profile data from the ENRAM data repository</a><ul>
<li class="chapter" data-level="1.1" data-path="download-vp.html"><a href="download-vp.html#install-biorad"><i class="fa fa-check"></i><b>1.1</b> Install bioRad</a></li>
<li class="chapter" data-level="1.2" data-path="download-vp.html"><a href="download-vp.html#define-download-settings"><i class="fa fa-check"></i><b>1.2</b> Define download settings</a></li>
<li class="chapter" data-level="1.3" data-path="download-vp.html"><a href="download-vp.html#download-vertical-profile-data"><i class="fa fa-check"></i><b>1.3</b> Download vertical profile data</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="extract-vp.html"><a href="extract-vp.html"><i class="fa fa-check"></i><b>2</b> Extract, aggregate and export vertical profile data</a><ul>
<li class="chapter" data-level="2.1" data-path="extract-vp.html"><a href="extract-vp.html#define-extraction-settings"><i class="fa fa-check"></i><b>2.1</b> Define extraction settings</a></li>
<li class="chapter" data-level="2.2" data-path="extract-vp.html"><a href="extract-vp.html#create-a-list-of-data-file-paths"><i class="fa fa-check"></i><b>2.2</b> Create a list of data file paths</a></li>
<li class="chapter" data-level="2.3" data-path="extract-vp.html"><a href="extract-vp.html#read-data-with-biorad"><i class="fa fa-check"></i><b>2.3</b> Read data with bioRad</a><ul>
<li class="chapter" data-level="2.3.1" data-path="extract-vp.html"><a href="extract-vp.html#single-file-example"><i class="fa fa-check"></i><b>2.3.1</b> Single file example</a></li>
<li class="chapter" data-level="2.3.2" data-path="extract-vp.html"><a href="extract-vp.html#all-files"><i class="fa fa-check"></i><b>2.3.2</b> All files</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="extract-vp.html"><a href="extract-vp.html#sort-data"><i class="fa fa-check"></i><b>2.4</b> Sort data</a></li>
<li class="chapter" data-level="2.5" data-path="extract-vp.html"><a href="extract-vp.html#export-vp-data-to-a-csv-file"><i class="fa fa-check"></i><b>2.5</b> Export vp data to a CSV file</a></li>
<li class="chapter" data-level="2.6" data-path="extract-vp.html"><a href="extract-vp.html#filter-out-lower-and-upper-heights"><i class="fa fa-check"></i><b>2.6</b> Filter out lower and upper heights</a></li>
<li class="chapter" data-level="2.7" data-path="extract-vp.html"><a href="extract-vp.html#add-aggregation-bins"><i class="fa fa-check"></i><b>2.7</b> Add aggregation bins</a></li>
<li class="chapter" data-level="2.8" data-path="extract-vp.html"><a href="extract-vp.html#aggregate"><i class="fa fa-check"></i><b>2.8</b> Aggregate</a></li>
<li class="chapter" data-level="2.9" data-path="extract-vp.html"><a href="extract-vp.html#export-aggregated-vp-data-to-a-csv-file"><i class="fa fa-check"></i><b>2.9</b> Export aggregated vp data to a CSV file</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Process vertical profile data for visualizations</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="download_vp" class="section level1">
<h1><span class="header-section-number">1</span> Download vertical profile data from the ENRAM data repository</h1>
<p>The steps described in this chapter can be skipped if all required vertical profile data are already available locally. We will need the bioRad package for the next steps too though, so make sure it is installed.</p>
<div id="install-biorad" class="section level2">
<h2><span class="header-section-number">1.1</span> Install bioRad</h2>
<p>Follow step 1 to 3 of the <a href="https://github.com/adokter/bioRad#installation">bioRad installation instructions</a>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">&quot;adokter/bioRad&quot;</span>, <span class="dt">ref=</span><span class="st">&quot;master&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(bioRad)</code></pre></div>
</div>
<div id="define-download-settings" class="section level2">
<h2><span class="header-section-number">1.2</span> Define download settings</h2>
<p>To download specific data from the <a href="http://enram.github.io/data-repository">ENRAM bird profile data repository</a>, we need to specify a number of settings/filters, such as the date range, countries, and radars to include and where the vertical profile data should be stored locally (a file path relative to this script):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">download_settings &lt;-<span class="st"> </span><span class="kw">list</span>()
download_settings[[<span class="st">&quot;start_date&quot;</span>]]   &lt;-<span class="st"> &quot;2017-03-01&quot;</span>
download_settings[[<span class="st">&quot;end_date&quot;</span>]]     &lt;-<span class="st"> &quot;2017-04-30&quot;</span>
download_settings[[<span class="st">&quot;countries&quot;</span>]]    &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;se&quot;</span>)
download_settings[[<span class="st">&quot;radars&quot;</span>]]       &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;ang&quot;</span>, <span class="st">&quot;kkr&quot;</span>)
download_settings[[<span class="st">&quot;raw_data_dir&quot;</span>]] &lt;-<span class="st"> &quot;../data/raw/&quot;</span> <span class="co"># Needs a trailing slash!</span></code></pre></div>
</div>
<div id="download-vertical-profile-data" class="section level2">
<h2><span class="header-section-number">1.3</span> Download vertical profile data</h2>
<p>Download the data. Note that this step might take some time:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bioRad::<span class="kw">download_vp</span>(
  <span class="dt">start_date =</span> download_settings$start_date,
  <span class="dt">end_date =</span> download_settings$end_date,
  <span class="dt">country =</span> download_settings$countries,
  <span class="dt">radar =</span> download_settings$radars,
  <span class="dt">localpath =</span> download_settings$raw_data_dir
)</code></pre></div>
<p>We now have all the data stored locally. 👏 In the <a href="extract-vp.html">next chapter</a> we’ll export what we need for the visualization in a CSV file.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="extract-vp.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": {}
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/enram/timamp-etl/edit/master/src/1_download_vp.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

</body>

</html>
